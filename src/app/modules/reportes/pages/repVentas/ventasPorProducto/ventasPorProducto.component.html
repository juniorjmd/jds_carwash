<div class="card">
    <div class="card-header text-center">
        <h1>Ventas por producto</h1>
      </div>  

      <div class="card-body"> 
        <div class="row">
            
            <div class="col-sm-12 col-lg-5">
               <span>Producto</span>
                 <elemt-productosVendidosDropdown  [selectedValue]="productosVendidoc"
                 (selectionChange)="getVentasPorProducto($event)" 
                 ></elemt-productosVendidosDropdown>
            </div> 

        <div class="col-sm-12 col-lg-6" > 
            
            <span>
                Escoja el rango de fecha:
            </span>
            <div class="row"> 
            <div class="col-sm-12 col-lg-4">
                <div class="form-group">
                    <input type="date" [min]="fecha1" [max]="maximo"  (keyup.enter)="getDocumentosPorFecha()" [(ngModel)]="fecha1" class="form-control" name="" id="" aria-describedby="helpId" placeholder="">
                    <small id="helpId" class="form-text text-muted">Fecha inicial del rango de búsqueda de factura</small>
                </div>
            </div>
            <div class="col-sm-12 col-lg-4">
                <div class="form-group">
                    <input type="date" [min]="fecha1" [max]="fecha2" (keyup.enter)="getDocumentosPorFecha()" [(ngModel)]="fecha2" class="form-control" name="" id="" aria-describedby="helpId" placeholder="">
                    <small id="helpId" class="form-text text-muted">Fecha final del rango de búsqueda de factura</small>
                </div>
            </div>
            <div class="col-sm-12 col-lg-2">
                <button type="button" (click)="getDocumentosPorFecha()" class="btn btn-primary"><i class="bi bi-search"></i></button>
            </div>
        </div> </div></div>
 
        <div class="row">
            <div class="col-sm-6 centrado">
              <div class="btn btn-primary" (click)="resumen=true">Resumen <i class="bi bi-arrow-repeat spinner-icon"  [ngClass]="{ 'd-none': hideR }"></i></div>
             </div>
             <div class="col-sm-6 centrado">
                <div class="btn btn-primary" (click)="resumen=false">Listado de Ventas <i class="bi bi-arrow-repeat spinner-icon"  [ngClass]="{ 'd-none': hideF }"></i></div>
             </div>
        </div>

        <div class="row" *ngIf="resumen">
            <div class="col-sm-12 centrado">
             <h4>Resumen producto</h4>  
            </div>
            <div class="col-sm-12 col-lg-6   "  >
                <div class="row">
                    <div class="col-sm-12 col-lg-6   "  >
                        <table class="table">
                            <tr>
                                <th>Cantidad Vendida</th>
                                <td>{{resumenVenta?.cantidadVendida}}</td>  
                            </tr>
                            <tr > <th>Total Vendido</th>
                                <td>{{resumenVenta?.totalVenta}}</td> 
                            </tr>
                        </table>
                    </div></div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12   "  >
                        <h5>Dia mas vendidos</h5> 
                        <table class="table">
                            <tr>
                                <th>Fecha</th>
                                <th>Cantidad</th>
                                <th>Total Vendido</th>
                            </tr>
                            <tr >
                                <td>{{resumenVenta?.mayorDiaVenta?.fecha}}</td> 
                                <td>{{resumenVenta?.mayorDiaVenta?.cantidad}}</td> 
                                <td>{{resumenVenta?.mayorDiaVenta?.totalVendido}}</td> 
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-lg-12   "  >
                        <h5>Dia menos vendidos</h5> 
                        <table class="table">
                            <tr>
                                <th>Fecha</th>
                                <th>Cantidad</th>
                                <th>Total Vendido</th>
                            </tr>
                            <tr >
                                <td>{{resumenVenta?.menorDiaVenta?.fecha}}</td> 
                                <td>{{resumenVenta?.menorDiaVenta?.cantidad}}</td> 
                                <td>{{resumenVenta?.menorDiaVenta?.totalVendido}}</td> 
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-lg-6   " style="max-height: 400px; overflow-y: auto;">
               <h5>Venta Por Dia</h5> 
                <table class="table">
                    <tr>
                        <th>Fecha</th>
                        <th>Cantidad</th>
                        <th>Total Vendido</th>
                    </tr>
                    <tr  *ngFor="let item of resumenVenta?.resumen">
                        <td>{{item.fecha}}</td> 
                        <td>{{item.cantidad}}</td> 
                        <td>{{item.totalVendido}}</td> 
                    </tr>
                </table>
             </div>
        </div>


    <div class="row" *ngIf="!resumen">
        <div class="col-sm-12 centrado">
            Listado de facturas
        </div>
   
    <div class="row">
        <div class="col-sm-12 contenedorTablas ">
            <table class="table">
                <tr>
                    <td>Fecha</td>
                    <td>Factura ID</td>
                    <td>Cliente</td>
                    <td>Cantidad</td>
                    <td>Valor Parcial</td>
                    <td>Descuento</td>
                    <td>IVA</td>
                    <td>Total</td>
                    <td colspan="4">Opciones</td>
                </tr>
                <tr *ngFor="let venta of documentos">
                    <td>{{venta.fecha}}</td>
                    <td>{{venta.idDocumentoFinal}}</td>
                    <td>{{venta.clienteNombre}}</td>
                    <td>{{venta.cantidadVendida}}</td>
                    <td>{{venta.valorParcial|currency:'USD'}}</td>
                    <td>{{venta.descuento|currency:'USD'}}</td>
                    <td>{{venta.valorIVA|currency:'USD'}}</td>
                    <td>{{venta.valorTotal|currency:'USD'}}</td>
                    <td><i class="bi bi-printer-fill boton_activo" (click)="imprimirFactura(venta)"></i> </td>
                    <td> <i class="bi bi-list-ul boton_activo" (click)="VerFactura(venta)"></i></td>
                    <td> </td>
                </tr>
            </table>
            <hr>
        </div>
    </div> </div>

</div>
</div><hr><hr>

